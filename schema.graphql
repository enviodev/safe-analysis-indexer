enum SafeVersion {
  V1_0_0
  V1_1_1ORV1_2_0
  V1_3_0
  V1_4_1
  V1_5_0
}

type Safe {
  id: ID! # chainId-address
  creationTxHash: String! @index
  address: String! @index
  chainId: Int! @index
  owners: [String!]!
  threshold: Int!
  version: SafeVersion! @index
  safeOwners: [SafeOwner!]! @derivedFrom(field: "safe")
  initializer: String!
  safeTransactions: [SafeTransaction!]! @derivedFrom(field: "safe")
  safeModuleTransactions: [SafeModuleTransaction!]! @derivedFrom(field: "safe")
  numberOfSuccessfulExecutions: Int!
  numberOfFailedExecutions: Int!
  totalGasSpent: BigInt!
  initiator: String!
}

type Owner {
  id: ID! # owner address
  safes: [String!]!
  safeOwners: [SafeOwner!]! @derivedFrom(field: "owner")
}

type SafeOwner {
  id: ID! # ownerAddress-safeId
  owner: Owner! @index
  safe: Safe! @index
}

type SafeModuleTransaction {
  id: ID!
  safe: Safe! @index
  safeModule: String!
  to: String!
  value: BigInt!
  data: String!
  operation: BigInt!
  txHash: String!
}

type SafeTransaction {
  id: ID! # txHash
  safe: Safe! @index
  to: String!
  value: BigInt!
  data: String!
  operation: BigInt!
  safeTxGas: BigInt!
  baseGas: BigInt!
  gasPrice: BigInt!
  gasToken: String!
  refundReceiver: String!
  signatures: String!
  additionalInfo: String!
  executionDate: BigInt!
  txHash: String!
}
