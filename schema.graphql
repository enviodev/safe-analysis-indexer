enum SafeVersion {
  V1_0_0
  V1_1_1ORV1_2_0
  V1_3_0
  V1_4_1
  V1_5_0
}

## possible optimization is to truncate the addresses to a statistically significant length for faster lookups
type ProxySafeLookup {
  id: ID! # chainId-proxyAddress
  safe: Safe! @index
  proxyAddress: String! @index
}

type Safe {
  id: ID! # chainId-address
  creationTxHash: String! @index
  address: String! @index
  chainId: Int! @index
  owners: [String!]!
  threshold: Int!
  version: SafeVersion! @index
  safeOwners: [SafeOwner!]! @derivedFrom(field: "safe")
}

type Owner {
  id: ID! # owner address
  safes: [String!]!
  safeOwners: [SafeOwner!]! @derivedFrom(field: "owner")
}

type SafeOwner {
  id: ID! # ownerAddress-safeId
  owner: Owner! @index
  safe: Safe! @index
}
